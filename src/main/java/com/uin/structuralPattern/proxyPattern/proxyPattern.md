# 代理模式

## java中的代理和代理模式中的代理 有什么区别

在Java中，“代理”这个词可以指代不同的概念，主要分为两个层面：语言特性的代理和设计模式中的代理。下面我会分别解释这两个概念及其区别。

Java语言特性中的代理

Java语言特性中的代理主要指的是动态代理，它允许你在运行时创建一个实现一组给定接口的新类。这种代理类可以用来拦截对目标对象的方法调用，从而在调用前后执行额外的操作，如日志记录、事务管理等。Java中动态代理的实现主要依赖于java.lang.reflect.Proxy类和java.lang.reflect.InvocationHandler接口。

动态代理的特点：
1. 动态生成：代理类是在运行时由JVM动态生成的，不需要手动编写代理类的代码。
2. 接口绑定：动态代理只能代理实现了接口的对象，因为代理类必须实现与目标对象相同的接口。
3. InvocationHandler：需要实现InvocationHandler接口，该接口的invoke()方法会在代理类的方法被调用时触发，从而允许你自定义方法调用的行为。

设计模式中的代理

设计模式中的代理模式是一种结构型设计模式，它提供了一种方法来控制对一个对象的访问，同时提供了一个替代的接口来访问同一个对象。代理模式可以用于多种目的，包括但不限于控制访问、远程代理、虚拟代理、缓存、防火墙、智能引用等。

代理模式的特点：
1. 静态或动态：代理可以是静态定义的（静态代理），也可以是动态生成的（动态代理）。 
2. 目标对象：代理模式中有一个目标对象，代理对象代表目标对象，调用者通过代理对象间接地调用目标对象的方法。 
3. 功能增强：代理模式允许在目标对象的方法调用前后添加额外的功能，而无需修改目标对象的代码。

区别总结
1. 范围：设计模式中的代理是一个更广泛的概念，它可以包括Java语言特性中的动态代理，但也可以包括静态代理或其他非动态生成的代理。 
2. 实现方式：设计模式中的代理可以是静态定义的类，而Java语言特性中的动态代理是通过反射在运行时动态生成的。 
3. 灵活性：动态代理提供了更高的灵活性，因为它允许你在运行时决定代理的行为，而静态代理则在编译时就已经确定了代理的逻辑。
在实际开发中，设计模式中的代理模式经常与Java的动态代理特性结合使用，特别是在框架和库的开发中，如Spring AOP（面向切面编程）就大量使用了动态代理技术来实现横切关注点的分离。

## 概述

代理模式是一种应用很广泛的结构型设计模式，而且变化很多。在代理模式中引入了一个新的代理对象，代理对象可以在客户端对象和目标对象之间起到中介的作用，去掉客户不能看到的内容和服务或者增添客户需要的额外服务。

代理模式定义如下：代理模式（Proxy Pattern）：给某一个对象提供一个代理，并由代理对象控制对原对象的引用。代理模式是一种对象结构型模式。

代理模式的结构比较简单，其核心是代理类。为了让客户端能够一致性地对待真实对象和代理对象，在代理模式中引入了抽象层。



